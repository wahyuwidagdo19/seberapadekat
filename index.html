<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Seberapa Dekat Kamu dengan Gue</title>

<style>
body{
  margin:0;height:100vh;
  background:linear-gradient(135deg,#0b0b0b,#1e1e1e);
  color:white;font-family:Arial;
  display:flex;justify-content:center;align-items:center;
}
.card{
  background:rgba(255,255,255,.06);
  padding:35px;border-radius:18px;
  width:360px;text-align:center;
  box-shadow:0 0 40px rgba(0,0,0,.8);
}
h1{color:#00ffcc}
button,input{
  width:100%;padding:12px;border-radius:25px;
  border:none;margin:8px 0;font-weight:bold;
}
button{background:#00ffcc;cursor:pointer}
button:hover{transform:scale(1.05)}
button:disabled{opacity:.6;cursor:not-allowed}
.correct{background:#2ecc71!important;color:black}
.wrong{background:#ff4d4d!important;color:white}
.progress{height:8px;background:#333;border-radius:10px;overflow:hidden;margin:10px 0}
.bar{height:100%;background:#00ffcc}
.timer{color:#ffcc00}
.leaderboard{text-align:left;margin-top:15px}
.leaderboard li{margin:6px 0}
.badge{background:#222;padding:6px 10px;border-radius:15px;margin:4px;display:inline-block}
canvas{position:fixed;top:0;left:0;pointer-events:none}
</style>
</head>

<body>
<canvas id="confetti"></canvas>

<div class="card" id="app">
  <h1>Seberapa Dekat<br>dengan Gue?</h1>
  <input id="nameInput" placeholder="Nama lu...">
  <button onclick="register()">START</button>
</div>

<script>
/* ===== SOUND ===== */
const AudioCtx=new (window.AudioContext||window.webkitAudioContext)();
function beep(freq){
 const o=AudioCtx.createOscillator(),g=AudioCtx.createGain();
 o.frequency.value=freq;
 o.connect(g);g.connect(AudioCtx.destination);
 o.start();g.gain.exponentialRampToValueAtTime(.0001,AudioCtx.currentTime+.15);
 o.stop(AudioCtx.currentTime+.15);
}

/* ===== CONFETTI ===== */
const canvas=document.getElementById("confetti"),ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;
let conf=[];
function shootConfetti(){
 conf=[];
 for(let i=0;i<150;i++){
  conf.push({x:Math.random()*canvas.width,y:-10,
   r:Math.random()*6+2,dx:(Math.random()-.5)*5,dy:Math.random()*4+2});
 }
}
(function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 conf.forEach(p=>{
  ctx.fillStyle=`hsl(${Math.random()*360},100%,50%)`;
  ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();
  p.x+=p.dx;p.y+=p.dy;
 });
 requestAnimationFrame(draw);
})();

/* ===== QUIZ ===== */
let score=0,index=0,player="",time=10,timer,locked=false;
const RESET_CODE="192011";

const questions=[
 {q:"Buah favorit Wahyu?",
  o:["ğŸ Apel","ğŸŠ Jeruk","ğŸŒ Pisang"],
  c:"ğŸŠ Jeruk"},

 {q:"Lagu yang sering diputer Wahyu?",
  o:["ğŸ¸ Don't Look Back in Anger","ğŸ§ Yellow","ğŸ¶ Fix You"],
  c:"ğŸ¸ Don't Look Back in Anger"},

 {q:"Hobi utama Wahyu?",
  o:["ğŸ“– Membaca","ğŸ® Bermain Game","ğŸ˜´ Tidur"],
  c:"ğŸ® Bermain Game"},

 {q:"Game favorit Wahyu?",
  o:["âš½ FIFA","ğŸ”¥ Mobile Legends","ğŸ§± Minecraft"],
  c:"ğŸ”¥ Mobile Legends"},

 {q:"Rank tertinggi Wahyu?",
  o:["Mythic","ğŸ‘‘ Immortal","Legend"],
  c:"ğŸ‘‘ Immortal"}
];

function register(){
 player=nameInput.value.trim();
 if(!player)return alert("Nama dulu ğŸ˜…");
 start();
}

function start(){score=0;index=0;showQ();}

function showQ(){
 locked=false;
 clearInterval(timer);time=10;
 const q=questions[index];
 app.innerHTML=`
 <div class="progress"><div class="bar" style="width:${index/questions.length*100}%"></div></div>
 <div class="timer">â±ï¸ ${time}</div>
 <h1>${q.q}</h1>
 <div id="opts"></div>
 `;
 const box=document.getElementById("opts");
 shuffle([...q.o]).forEach(text=>{
  const b=document.createElement("button");
  b.textContent=text;
  b.onclick=()=>check(b,text);
  box.appendChild(b);
 });
 timer=setInterval(()=>{
  time--;document.querySelector(".timer").innerText="â±ï¸ "+time;
  if(time<=0){clearInterval(timer);next();}
 },1000);
}

function check(btn,ans){
 if(locked)return;
 locked=true;
 document.querySelectorAll("button").forEach(b=>b.disabled=true);
 beep(ans===questions[index].c?750:200);
 if(ans===questions[index].c){score++;btn.classList.add("correct")}
 else btn.classList.add("wrong");
 setTimeout(next,700);
}

function next(){index<questions.length-1?(index++,showQ()):result();}

function save(p){
 let d=JSON.parse(localStorage.getItem("leaderboard"))||[];
 d.push({name:player,percent:p});
 d.sort((a,b)=>b.percent-a.percent);
 localStorage.setItem("leaderboard",JSON.stringify(d.slice(0,5)));
}

function lb(){
 let d=JSON.parse(localStorage.getItem("leaderboard"))||[];
 return `<div class="leaderboard"><h3>ğŸ† Leaderboard</h3><ol>${
 d.map((x,i)=>`<li>${i==0?"ğŸ‘‘ ":""}${x.name} â€” ${x.percent}%</li>`).join("")
 }</ol></div>`;
}

function resetLB(){
 const c=prompt("Kode reset:");
 if(c===RESET_CODE){
  localStorage.removeItem("leaderboard");
  alert("Leaderboard di-reset");
  location.reload();
 }
}

function result(){
 const p=Math.round(score/questions.length*100);
 save(p);
 if(p===100)shootConfetti();
 app.innerHTML=`
 <h1>${p}%</h1>
 <p>${player}</p>
 ${p===100?'<div class="badge">ğŸ‘‘ TRUE BROTHER</div>':""}
 ${lb()}
 <button onclick="location.reload()">Main Lagi</button>
 <button class="danger" onclick="resetLB()">Reset</button>
 `;
}

function shuffle(a){return a.sort(()=>Math.random()-.5)}
</script>
</body>
</html>